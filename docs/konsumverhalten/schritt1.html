<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schritt 1: √ñkologischer Fussabdruck</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fbbf24 0%, #fb923c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .lesson-header {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 40px;
            border-radius: 20px 20px 0 0;
        }

        .lesson-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .lesson-content {
            padding: 40px;
            line-height: 1.8;
        }

        .info-box {
            background: #fef3c7;
            border-left: 4px solid #fb923c;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .info-box p {
            color: #78350f;
        }

        h2 {
            color: #f97316;
            margin: 30px 0 15px 0;
            font-size: 1.6em;
        }

        h3 {
            color: #ea580c;
            margin: 25px 0 12px 0;
            font-size: 1.3em;
        }

        .definition-box {
            background: #ffedd5;
            border: 2px solid #fb923c;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .definition-box h3 {
            color: #fb923c;
            margin-top: 0;
        }

        /* Flashcards Styling */
        .flashcards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .flashcard {
            perspective: 1000px;
            height: 250px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #fb923c;
        }

        .flashcard-front h4 {
            color: #92400e;
            font-size: 0.9em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .flashcard-front .term {
            color: #f97316;
            font-size: 1.4em;
            font-weight: bold;
            margin: 0;
        }

        .flashcard-back {
            background: white;
            border: 3px solid #fb923c;
            transform: rotateY(180deg);
        }

        .flashcard-back h4 {
            color: #f97316;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .flashcard-back p {
            color: #78350f;
            font-size: 0.95em;
            line-height: 1.6;
            text-align: left;
        }

        .flip-hint {
            font-size: 0.85em;
            color: #92400e;
            margin-top: 15px;
            font-style: italic;
        }

        .btn-save {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s;
            font-size: 1em;
        }

        .btn-save:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        /* Game Toggle Box */
        .game-toggle-box {
            background: #fff7ed;
            border: 3px solid #fb923c;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .game-toggle-btn {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(251, 146, 60, 0.3);
        }

        .game-toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251, 146, 60, 0.4);
        }

        .game-container-collapsible {
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        /* Game Styling */
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-header h3 {
            color: #f97316;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .score-item {
            text-align: center;
        }

        .score-item .label {
            font-size: 0.9em;
            color: #78350f;
            margin-bottom: 5px;
        }

        .score-item .value {
            font-size: 2em;
            font-weight: bold;
            color: #f97316;
        }

        .game-question {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .game-question.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-number {
            color: #fb923c;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            color: #78350f;
            font-weight: bold;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .answer-btn {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #fb923c;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 1em;
            font-weight: bold;
            color: #78350f;
        }

        .answer-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(251, 146, 60, 0.3);
        }

        .answer-btn.correct {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-color: #10b981;
            animation: correctPulse 0.6s;
        }

        .answer-btn.incorrect {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-color: #ef4444;
            animation: incorrectShake 0.6s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .game-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            font-weight: bold;
        }

        .game-feedback.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .game-feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        .next-btn {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
            display: none;
        }

        .next-btn:hover {
            transform: scale(1.05);
        }

        .next-btn.show {
            display: inline-block;
        }

        .game-result {
            background: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            display: none;
        }

        .game-result.show {
            display: block;
            animation: slideIn 0.5s;
        }

        .result-score {
            font-size: 4em;
            font-weight: bold;
            color: #f97316;
            margin: 20px 0;
        }

        .result-message {
            font-size: 1.3em;
            color: #78350f;
            margin: 20px 0;
        }

        .result-emoji {
            font-size: 5em;
            margin: 20px 0;
        }

        .tips-box {
            background: #fef3c7;
            border: 2px solid #fb923c;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            text-align: left;
        }

        .tips-box h4 {
            color: #f97316;
            margin-bottom: 15px;
        }

        .tips-box ul {
            margin-left: 25px;
            color: #78350f;
        }

        .tips-box li {
            margin: 10px 0;
        }

        .restart-btn {
            background: #9ca3af;
            color: white;
            padding: 12px 30px;
            margin: 10px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .restart-btn:hover {
            background: #6b7280;
            transform: scale(1.05);
        }

        /* Interaktives Quiz/Spiel Styling */
        .interactive-box {
            background: #fff7ed;
            border: 3px solid #fb923c;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .interactive-box h3 {
            color: #f97316;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .calculator-link-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #fb923c;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }

        .calculator-link-box h3 {
            color: #92400e;
            margin-top: 0;
        }

        .calculator-button {
            display: inline-block;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 15px 40px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 15px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(251, 146, 60, 0.3);
        }

        /* Calculator Embed Styling */
        .calculator-embed-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #fb923c;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .calculator-embed-box h3 {
            color: #92400e;
            margin-top: 0;
            text-align: center;
        }

        .calculator-embed-box > p {
            text-align: center;
            color: #78350f;
        }

        .calculator-toggle-btn {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(251, 146, 60, 0.3);
        }

        .calculator-toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251, 146, 60, 0.4);
        }

        .calculator-iframe-container {
            margin-top: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .calculator-iframe-container iframe {
            width: 100%;
            height: 700px;
            border: none;
        }

        .btn-upload {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1em;
        }

        .btn-upload:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-remove-image {
            background: #ef4444;
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .btn-remove-image:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .calculator-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
        }

        /* Drag and Drop Zuordnung */
        .matching-game {
            margin: 20px 0;
        }

        .drag-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
            min-height: 60px;
            padding: 15px;
            background: #fff;
            border: 2px dashed #fb923c;
            border-radius: 10px;
        }

        .drag-item {
            background: #fef3c7;
            border: 2px solid #fb923c;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: move;
            user-select: none;
            font-weight: bold;
            color: #78350f;
            transition: all 0.2s;
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(251, 146, 60, 0.3);
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drop-zones {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drop-zone {
            background: #fff;
            border: 3px dashed #d1d5db;
            border-radius: 10px;
            padding: 20px;
            min-height: 80px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #fed7aa;
            border-color: #f97316;
            border-style: solid;
        }

        .drop-zone.correct {
            background: #d1fae5;
            border-color: #10b981;
            border-style: solid;
        }

        .drop-zone.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
            border-style: solid;
        }

        .drop-zone-label {
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 10px;
            display: block;
        }

        .drop-zone-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            min-height: 40px;
        }

        .check-button {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s;
        }

        .check-button:hover {
            transform: scale(1.05);
        }

        .check-button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .game-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            font-weight: bold;
        }

        .game-feedback.show {
            display: block;
        }

        .game-feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .game-feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        .portfolio-box {
            background: #fef3c7;
            border: 3px solid #fb923c;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .portfolio-box h3 {
            color: #f97316;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .portfolio-box textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #fde68a;
            border-radius: 10px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1em;
            resize: vertical;
            margin-bottom: 15px;
        }

        .portfolio-box textarea:focus {
            outline: none;
            border-color: #fb923c;
            box-shadow: 0 0 10px rgba(251, 146, 60, 0.2);
        }

        .saved-indicator {
            color: #f97316;
            font-weight: bold;
            display: none;
            margin-top: 10px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        .btn-back {
            background: #f5f5f5;
            color: #333;
        }

        .btn-complete {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
        }

        .btn-pdf {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .btn-back-header {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border: 2px solid white;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
            margin-bottom: 20px;
        }

        .btn-back-header:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        ul {
            margin: 15px 0 15px 30px;
            line-height: 1.8;
        }

        li {
            margin-bottom: 8px;
        }

        .reset-game {
            background: #9ca3af;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 10px;
        }

        .reset-game:hover {
            background: #6b7280;
        }

        @media (max-width: 768px) {
            .lesson-header h1 {
                font-size: 1.8em;
            }

            .lesson-content {
                padding: 20px;
            }

            .drag-items {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="lesson-header">
            <button class="btn-back-header" onclick="returnToMain()">‚Üê Zur√ºck zur √úbersicht</button>
            <h1>üë£ √ñkologischer Fussabdruck</h1>
        </div>

        <div class="lesson-content">
            <div class="info-box">
                <p><strong>üìã Lernziel:</strong> Sie verstehen das Konzept des √∂kologischen Fussabdrucks und k√∂nnen Ihr eigenes Konsumverhalten kritisch hinterfragen.</p>
            </div>

            <h2>Was ist der √∂kologische Fussabdruck?</h2>
            
            <h3>üìö Aufgabe 1: Lesen Sie die Definitionen zu den folgenden Begriffen</h3>
            
            <div class="info-box" style="background: #f5f5f5; border-left-color: #9ca3af;">
                <p style="color: #4b5563;"><strong>üí° Hinweis:</strong> Diese Begriffe finden Sie auch in Ihrem Buch <em>"Gesellschaft"</em>. Bitte streichen Sie die Begriffe dort an!</p>
            </div>

            <div class="flashcards-container">
                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">√ñkologischer Fussabdruck</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>√ñkologischer Fussabdruck</h4>
                            <p>Der √∂kologische Fussabdruck misst, wie viel Fl√§che notwendig ist, um unseren Lebensstil mit allen Ressourcen (Nahrung, Energie, Wasser) zu versorgen.</p>
                            <p style="margin-top: 10px;"><strong>Wichtig:</strong> Leben wir √ºber unsere Verh√§ltnisse, wenn unser Fussabdruck gr√∂√üer ist als die verf√ºgbare Fl√§che.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>

                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">Biokapazit√§t</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>Biokapazit√§t</h4>
                            <p>Die Biokapazit√§t zeigt, wie viel die Natur produzieren kann (z.B. Holz, Nahrung) und wie viel Schadstoffe sie abbauen kann (z.B. CO‚ÇÇ).</p>
                            <p style="margin-top: 10px;"><strong>Problem:</strong> √úbersteigt unser Verbrauch die Biokapazit√§t, schaden wir der Umwelt dauerhaft.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>

                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">Import von Biokapazit√§t</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>Import von Biokapazit√§t</h4>
                            <p>Beim Import von Biokapazit√§t nutzen wir Ressourcen aus anderen L√§ndern (z.B. importieren Holz, Nahrungsmittel) und exportieren unsere Abfallstoffe.</p>
                            <p style="margin-top: 10px;"><strong>Beispiel Schweiz:</strong> Die Schweiz verbraucht mehr, als sie selbst produzieren kann, und gleicht dies durch Importe aus.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>

                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">Ressourcenknappheit</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>Ressourcenknappheit</h4>
                            <p>Ressourcenknappheit bedeutet, dass wir mehr nat√ºrliche Ressourcen verbrauchen, als nachgeliefert werden k√∂nnen.</p>
                            <p style="margin-top: 10px;"><strong>Folge:</strong> Wichtige Ressourcen wie Wasser, √ñl oder seltene Rohstoffe werden immer knapper und teurer.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>

                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">World Overshoot Day (Erd√ºberlastungstag)</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>World Overshoot Day</h4>
                            <p>Der Erd√ºberlastungstag markiert den Tag im Jahr, an dem die Menschheit alle nat√ºrlichen Ressourcen aufgebraucht hat, die die Erde in einem Jahr erneuern kann.</p>
                            <p style="margin-top: 10px;"><strong>Beispiel:</strong> F√§llt dieser Tag auf den 28. Juli, leben wir ab dann auf "Pump" und verbrauchen Ressourcen zuk√ºnftiger Generationen.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>

                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h4>Definition</h4>
                            <p class="term">Nachhaltige Entwicklung</p>
                            <span class="flip-hint">Klicken zum Umdrehen ‚Üª</span>
                        </div>
                        <div class="flashcard-back">
                            <h4>Nachhaltige Entwicklung</h4>
                            <p>Nachhaltige Entwicklung bedeutet, dass wir heute so leben, dass auch zuk√ºnftige Generationen ihre Bed√ºrfnisse noch erf√ºllen k√∂nnen.</p>
                            <p style="margin-top: 10px;"><strong>Ziel:</strong> Wir d√ºrfen nicht mehr verbrauchen, als langfristig wieder nachwachsen kann.</p>
                            <span class="flip-hint">Klicken zum Zur√ºckdrehen ‚Üª</span>
                        </div>
                    </div>
                </div>
            </div>

            <h3>üåç Aufgabe 2: Berechnen Sie Ihren eigenen Fussabdruck</h3>
            
            <div class="calculator-embed-box">
                <h3>Berechnen Sie Ihren pers√∂nlichen √∂kologischen Fussabdruck!</h3>
                <p>Nutzen Sie den integrierten Fussabdruckrechner direkt hier auf der Seite:</p>
                
                <button class="calculator-toggle-btn" onclick="toggleCalculator()">
                    <span id="toggleIcon">‚ñ∂</span> Rechner √∂ffnen/schlie√üen
                </button>
                
                <div class="calculator-iframe-container" id="calculatorContainer" style="display: none;">
                    <iframe 
                        id="calculatorFrame"
                        src="https://www.footprintcalculator.org/home/de" 
                        frameborder="0"
                        allowfullscreen>
                    </iframe>
                </div>
                
                <p style="margin-top: 15px; font-size: 0.95em; color: #78350f;">
                    <strong>‚ö†Ô∏è Wichtig:</strong> Machen Sie einen Screenshot Ihres Ergebnisses und laden Sie ihn unten im Lernjournal hoch!
                </p>
                
                <p style="margin-top: 10px; font-size: 0.9em; color: #92400e;">
                    <em>Alternativ:</em> <a href="https://www.footprintcalculator.org/home/de" target="_blank" style="color: #f97316; text-decoration: underline;">Rechner in neuem Tab √∂ffnen ‚Üó</a>
                </p>
            </div>

            <div class="portfolio-box">
                <h3>üìù Mein Lernjournal: Schritt 1</h3>
                <p style="color: #78350f; margin-bottom: 15px;">
                    <strong>Aufgabe:</strong>
                </p>
                <ul style="margin: 10px 0 15px 20px; line-height: 1.8; color: #78350f;">
                    <li>Tragen Sie Ihr Ergebnis vom Fussabdruckrechner ein (Wie viele Erden w√ºrden ben√∂tigt, wenn alle Menschen so leben w√ºrden wie Sie?)</li>
                    <li><strong>Reflexion:</strong> Wo k√∂nnten Sie pers√∂nlich Ihren √∂kologischen Fussabdruck verkleinern? Nennen Sie mindestens 3 konkrete Beispiele aus Ihrem Alltag.</li>
                </ul>
                
                <textarea 
                    id="portfolio-text" 
                    placeholder="Hier Ihre Notizen eintragen..."
                    oninput="savePortfolio()"></textarea>
                
                <div style="margin: 20px 0;">
                    <h4 style="color: #f97316; margin-bottom: 10px;">üì∑ Screenshot Ihres Ergebnisses hochladen</h4>
                    <p style="color: #78350f; font-size: 0.95em; margin-bottom: 10px;">
                        Laden Sie hier einen Screenshot Ihres Fussabdruck-Ergebnisses hoch:
                    </p>
                    
                    <input 
                        type="file" 
                        id="imageUpload" 
                        accept="image/*"
                        onchange="handleImageUpload(event)"
                        style="display: none;">
                    
                    <button class="btn-upload" onclick="document.getElementById('imageUpload').click()">
                        üìÅ Bild ausw√§hlen
                    </button>
                    
                    <div id="imagePreview" style="display: none; margin-top: 15px;">
                        <p style="color: #059669; font-weight: bold; margin-bottom: 10px;">‚úì Bild hochgeladen:</p>
                        <img id="previewImg" style="max-width: 100%; max-height: 300px; border-radius: 10px; border: 2px solid #fb923c;">
                        <button class="btn-remove-image" onclick="removeImage()" style="margin-top: 10px;">
                            üóëÔ∏è Bild entfernen
                        </button>
                    </div>
                </div>
                
                <div class="saved-indicator" id="saved-indicator">‚úì Automatisch gespeichert</div>
                
                <button class="btn-save" onclick="savePortfolioManual()">
                    üíæ Speichern
                </button>
            </div>

            <h2>üéÆ Aufgabe 3: Quiz zum Konsumverhalten</h2>
            
            <div class="info-box">
                <p style="color: #78350f;"><strong>üìã Aufgabe:</strong> Testen Sie Ihr Wissen √ºber nachhaltiges Konsumverhalten! W√§hlen Sie jeweils die beste Antwort aus.</p>
            </div>
            
            <div class="game-container-collapsible">
                <div class="game-header">
                    <h3>üåç Was verkleinert Ihren Fussabdruck wirklich?</h3>
                </div>

                <div class="score-board">
                    <div class="score-item">
                        <div class="label">Frage</div>
                        <div class="value"><span id="currentQuestion">1</span> / <span id="totalQuestions">10</span></div>
                    </div>
                    <div class="score-item">
                        <div class="label">Punkte</div>
                        <div class="value" id="scoreDisplay">0</div>
                    </div>
                    <div class="score-item">
                        <div class="label">Richtige Antworten</div>
                        <div class="value"><span id="correctAnswers">0</span></div>
                    </div>
                </div>

                <div id="questionsContainer"></div>

                <div class="game-result" id="gameResult">
                    <div class="result-emoji" id="resultEmoji">üéâ</div>
                    <h2 style="color: #f97316;">Quiz beendet!</h2>
                    <div class="result-score" id="finalScore">0/10</div>
                    <div class="result-message" id="resultMessage"></div>
                    
                    <div class="tips-box">
                        <h4>üí° Was wirklich einen Unterschied macht:</h4>
                        <ul>
                            <li><strong>Mobilit√§t:</strong> √ñV statt Auto, lokale Ferien statt Flugreisen</li>
                            <li><strong>Ern√§hrung:</strong> Weniger Fleisch & Milchprodukte, regionale & saisonale Produkte</li>
                            <li><strong>Energie:</strong> Weniger heizen (1¬∞C weniger = 6% Einsparung), √ñkostrom w√§hlen</li>
                            <li><strong>Konsum:</strong> Weniger kaufen, l√§nger nutzen, reparieren statt ersetzen</li>
                            <li><strong>Wohnen:</strong> Kleinere Wohnfl√§che = weniger Energie, Material und Kosten</li>
                        </ul>
                    </div>

                    <button class="restart-btn" onclick="restartGame()">üîÑ Quiz wiederholen</button>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-back" onclick="returnToMain()">
                    ‚Üê Zur√ºck zur √úbersicht
                </button>
                <button class="btn-pdf" onclick="downloadPDF()">
                    üìÑ PDF Schritt 1 herunterladen
                </button>
                <button class="btn-complete" onclick="completeStep()">
                    Schritt abschlie√üen und weiter ‚Üí
                </button>
            </div>
        </div>
    </div>

    <script>
        // Drag and Drop Funktionalit√§t
        let draggedElement = null;

        // Quiz wird direkt initialisiert
        document.addEventListener('DOMContentLoaded', function() {
            loadPortfolio();
            initGame();
        });

        // Flashcard Flip Funktion
        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        // Calculator Toggle Funktion
        function toggleCalculator() {
            const container = document.getElementById('calculatorContainer');
            const icon = document.getElementById('toggleIcon');
            
            if (container.style.display === 'none') {
                container.style.display = 'block';
                icon.textContent = '‚ñº';
            } else {
                container.style.display = 'none';
                icon.textContent = '‚ñ∂';
            }
        }

        // Bild-Upload Funktionen
        let uploadedImageData = null;

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file type
            if (!file.type.startsWith('image/')) {
                alert('Bitte w√§hlen Sie eine Bilddatei aus.');
                return;
            }
            
            // Check file size (max 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('Das Bild ist zu gro√ü. Bitte w√§hlen Sie ein Bild unter 5MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                uploadedImageData = e.target.result;
                
                // Show preview
                const preview = document.getElementById('imagePreview');
                const previewImg = document.getElementById('previewImg');
                previewImg.src = uploadedImageData;
                preview.style.display = 'block';
                
                // Save to localStorage
                savePortfolio();
                
                // Show saved indicator
                const indicator = document.getElementById('saved-indicator');
                indicator.style.display = 'block';
                indicator.textContent = '‚úì Bild gespeichert';
                setTimeout(() => {
                    indicator.style.display = 'none';
                    indicator.textContent = '‚úì Automatisch gespeichert';
                }, 2000);
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            uploadedImageData = null;
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('imageUpload').value = '';
            savePortfolio();
            
            const indicator = document.getElementById('saved-indicator');
            indicator.style.display = 'block';
            indicator.textContent = '‚úì Bild entfernt';
            setTimeout(() => {
                indicator.style.display = 'none';
                indicator.textContent = '‚úì Automatisch gespeichert';
            }, 2000);
        }

        // Quiz wird direkt initialisiert
        document.addEventListener('DOMContentLoaded', function() {
            loadPortfolio();
            initGame();
        });

        function loadPortfolio() {
            const saved = localStorage.getItem('learningProgressKonsum');
            if (saved) {
                const progress = JSON.parse(saved);
                const portfolioText = progress.texts && progress.texts['1'] ? progress.texts['1'] : '';
                document.getElementById('portfolio-text').value = portfolioText;
                
                // Load image if exists
                if (progress.images && progress.images['1']) {
                    uploadedImageData = progress.images['1'];
                    const preview = document.getElementById('imagePreview');
                    const previewImg = document.getElementById('previewImg');
                    previewImg.src = uploadedImageData;
                    preview.style.display = 'block';
                }
            }
        }

        function savePortfolio() {
            const text = document.getElementById('portfolio-text').value;
            
            let progress = {
                completedPoints: [],
                currentPoint: 1,
                texts: {},
                images: {}
            };
            
            const saved = localStorage.getItem('learningProgressKonsum');
            if (saved) {
                progress = JSON.parse(saved);
            }
            
            if (!progress.texts) {
                progress.texts = {};
            }
            if (!progress.images) {
                progress.images = {};
            }
            
            progress.texts['1'] = text;
            
            // Save image if uploaded
            if (uploadedImageData) {
                progress.images['1'] = uploadedImageData;
            } else {
                delete progress.images['1'];
            }
            
            localStorage.setItem('learningProgressKonsum', JSON.stringify(progress));
            
            const indicator = document.getElementById('saved-indicator');
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
        }

        function savePortfolioManual() {
            const text = document.getElementById('portfolio-text').value.trim();
            
            if (text === '') {
                alert('‚ö†Ô∏è Bitte tragen Sie zuerst Ihre Notizen ein.');
                return;
            }
            
            savePortfolio();
            
            // Zeige l√§ngere Best√§tigung
            const indicator = document.getElementById('saved-indicator');
            indicator.style.display = 'block';
            indicator.textContent = '‚úì Erfolgreich gespeichert!';
            setTimeout(() => {
                indicator.style.display = 'none';
                indicator.textContent = '‚úì Automatisch gespeichert';
            }, 3000);
        }

        function downloadPDF() {
            const portfolioText = document.getElementById('portfolio-text').value.trim();
            
            if (portfolioText === '') {
                alert('Bitte tragen Sie zuerst Ihre Notizen in das Lernjournal ein.');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFont("helvetica", "bold");
            doc.setFontSize(20);
            doc.text("Lernjournal: √ñkologischer Fussabdruck", 20, 20);
            
            doc.setFont("helvetica", "normal");
            doc.setFontSize(11);
            doc.text(`Datum: ${new Date().toLocaleDateString('de-DE')}`, 20, 30);
            
            let yPos = 45;
            
            // Add image if exists
            if (uploadedImageData) {
                doc.setFont("helvetica", "bold");
                doc.setFontSize(14);
                doc.text("Screenshot Fussabdruck-Ergebnis:", 20, yPos);
                yPos += 10;
                
                try {
                    // Calculate image dimensions
                    const img = new Image();
                    img.src = uploadedImageData;
                    
                    const maxWidth = 170;
                    const maxHeight = 100;
                    let imgWidth = maxWidth;
                    let imgHeight = (img.height / img.width) * maxWidth;
                    
                    if (imgHeight > maxHeight) {
                        imgHeight = maxHeight;
                        imgWidth = (img.width / img.height) * maxHeight;
                    }
                    
                    doc.addImage(uploadedImageData, 'JPEG', 20, yPos, imgWidth, imgHeight);
                    yPos += imgHeight + 15;
                } catch (error) {
                    console.error('Fehler beim Einf√ºgen des Bildes:', error);
                    doc.setFont("helvetica", "italic");
                    doc.setFontSize(10);
                    doc.text("(Bild konnte nicht eingef√ºgt werden)", 20, yPos);
                    yPos += 15;
                }
                
                // Add new page if needed
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                }
            }
            
            doc.setFont("helvetica", "bold");
            doc.setFontSize(14);
            doc.text("Meine Notizen:", 20, yPos);
            yPos += 8;
            
            doc.setFont("helvetica", "normal");
            doc.setFontSize(11);
            const lines = doc.splitTextToSize(portfolioText, 170);
            
            for (let line of lines) {
                if (yPos > 280) {
                    doc.addPage();
                    yPos = 20;
                }
                doc.text(line, 20, yPos);
                yPos += 7;
            }
            
            doc.save('Lernjournal_Schritt1_Fussabdruck.pdf');
        }

        function completeStep() {
            const portfolioText = document.getElementById('portfolio-text').value.trim();
            
            if (portfolioText === '') {
                const confirm = window.confirm('Sie haben noch nichts in Ihr Lernjournal eingetragen. M√∂chten Sie trotzdem fortfahren?');
                if (!confirm) return;
            }
            
            if (portfolioText !== '') {
                savePortfolio();
            }
            
            let progress = JSON.parse(localStorage.getItem('learningProgressKonsum') || '{"completedPoints":[],"currentPoint":1,"texts":{},"images":{}}');
            
            if (!progress.completedPoints.includes(1)) {
                progress.completedPoints.push(1);
                progress.currentPoint = 2;
                localStorage.setItem('learningProgressKonsum', JSON.stringify(progress));
            }
            
            alert('‚úì Schritt 1 abgeschlossen!' + (portfolioText !== '' ? '\nIhr Lernjournal-Eintrag wurde gespeichert.' : ''));
            window.location.href = 'index.html';
        }

        function returnToMain() {
            window.location.href = 'index.html';
        }

        // Lernspiel Toggle
        function toggleGame() {
            const container = document.getElementById('gameContainer');
            const icon = document.getElementById('gameToggleIcon');
            
            if (container.style.display === 'none') {
                container.style.display = 'block';
                icon.textContent = '‚ñº';
            } else {
                container.style.display = 'none';
                icon.textContent = '‚ñ∂';
            }
        }

        // Lernspiel Logik
        const questions = [
            {
                question: "Was hat den gr√∂ssten Einfluss auf Ihren pers√∂nlichen CO‚ÇÇ-Fussabdruck?",
                answers: [
                    { text: "T√§glich duschen statt baden", correct: false, feedback: "Duschen vs. Baden macht einen Unterschied, aber andere Bereiche haben viel gr√∂ssere Auswirkungen." },
                    { text: "Flugreisen und Autofahrten reduzieren", correct: true, feedback: "Richtig! Mobilit√§t ist einer der gr√∂ssten Faktoren - ein Flug nach Thailand verursacht etwa so viel CO‚ÇÇ wie ein Jahr Autofahren." },
                    { text: "Licht ausschalten wenn Sie den Raum verlassen", correct: false, feedback: "Das hilft, aber der Effekt ist relativ klein im Vergleich zu Mobilit√§t und Ern√§hrung." },
                    { text: "Papier statt Plastikt√ºten verwenden", correct: false, feedback: "Papiert√ºten brauchen in der Herstellung sogar mehr Energie als Plastik. Mehrweg ist am besten!" }
                ]
            },
            {
                question: "Welche Ern√§hrungsumstellung bringt am meisten f√ºr die Umwelt?",
                answers: [
                    { text: "Nur noch Bio-Produkte kaufen", correct: false, feedback: "Bio ist gut, aber der Transport und die Art des Produkts sind oft wichtiger als das Bio-Label." },
                    { text: "Fleisch- und Milchkonsum stark reduzieren", correct: true, feedback: "Genau! Tierische Produkte verursachen etwa 60% der Lebensmittel-Emissionen, obwohl sie nur 18% der Kalorien liefern." },
                    { text: "Nur noch Schweizer Produkte kaufen", correct: false, feedback: "Lokal ist wichtig, aber ein Flug nach Spanien hat mehr Impact als 10 kg Tomaten aus Spanien per LKW." },
                    { text: "Komplett auf Fertigprodukte verzichten", correct: false, feedback: "Selbst kochen ist gut, aber die Art der Zutaten (Fleisch vs. Gem√ºse) ist viel entscheidender." }
                ]
            },
            {
                question: "Sie m√∂chten ein neues Handy. Was ist am nachhaltigsten?",
                answers: [
                    { text: "Ein energieeffizientes Modell mit √ñko-Label kaufen", correct: false, feedback: "Das √ñko-Label hilft beim Stromverbrauch, aber 80% der Umweltbelastung entsteht bei der Herstellung." },
                    { text: "Das alte Handy noch 2-3 Jahre l√§nger nutzen", correct: true, feedback: "Perfekt! Die Herstellung eines Smartphones verursacht etwa 80 kg CO‚ÇÇ. L√§nger nutzen ist am besten." },
                    { text: "Ein gebrauchtes Handy kaufen", correct: false, feedback: "Das ist gut (besser als neu), aber Ihr aktuelles Handy weiterzunutzen ist noch besser!" },
                    { text: "Ein kleines Modell kaufen, das weniger Material braucht", correct: false, feedback: "Die Gr√∂sse macht weniger aus als die Lebensdauer. L√§nger nutzen schl√§gt kleineres Modell." }
                ]
            },
            {
                question: "Welche Heiztemperatur ist ideal f√ºr Wohn- und Arbeitsr√§ume?",
                answers: [
                    { text: "23-24¬∞C f√ºr optimalen Komfort", correct: false, feedback: "Das ist zu warm! Jedes Grad weniger spart etwa 6% Heizenergie." },
                    { text: "20-21¬∞C, mit Pullover auch 19¬∞C", correct: true, feedback: "Richtig! 20-21¬∞C sind ideal. Mit warmer Kleidung sind auch 19¬∞C sehr komfortabel und sparen viel Energie." },
                    { text: "18¬∞C um m√∂glichst viel zu sparen", correct: false, feedback: "Das ist etwas zu k√ºhl f√ºr dauerhaften Aufenthalt. 20¬∞C mit Pullover ist der bessere Kompromiss." },
                    { text: "Je nach Gef√ºhl zwischen 20-25¬∞C", correct: false, feedback: "Diese Schwankung verschwendet viel Energie. Konstant 20-21¬∞C ist optimal." }
                ]
            },
            {
                question: "Was spart beim W√§schewaschen am meisten Energie?",
                answers: [
                    { text: "Nur noch mit der Hand waschen", correct: false, feedback: "Moderne Waschmaschinen brauchen tats√§chlich weniger Wasser und Energie als Handw√§sche!" },
                    { text: "Waschtemperatur von 60¬∞C auf 30¬∞C senken", correct: true, feedback: "Exzellent! Etwa 90% der Energie beim Waschen geht f√ºr's Aufheizen drauf. 30¬∞C statt 60¬∞C spart enorm viel." },
                    { text: "Eine neue A+++-Waschmaschine kaufen", correct: false, feedback: "Die Temperatur senken spart viel mehr als eine neue Maschine (die in der Herstellung auch Ressourcen braucht)." },
                    { text: "Nur noch einmal pro Woche waschen", correct: false, feedback: "Die Temperatur zu senken ist effektiver. Bei 30¬∞C kannst du √∂fter waschen ohne mehr Energie zu verbrauchen als 1x bei 60¬∞C." }
                ]
            },
            {
                question: "Welche Aussage zu Second-Hand-Kleidung stimmt?",
                answers: [
                    { text: "Second Hand ist immer nachhaltiger als neu", correct: false, feedback: "Nicht ganz - wenn Sie Kleider lange tragen, ist der Unterschied kleiner. Aber bei Fast Fashion ist Second Hand klar besser." },
                    { text: "Second Hand spart etwa 80% CO‚ÇÇ im Vergleich zu Neuproduktion", correct: true, feedback: "Richtig! Die Kleiderproduktion verursacht enorme Emissionen. Second Hand spart fast alles davon ein." },
                    { text: "Second Hand-Kleider halten nicht so lange", correct: false, feedback: "Das Gegenteil ist oft wahr - alte Kleider wurden oft besser verarbeitet als heutige Fast Fashion." },
                    { text: "Second Hand ist nur f√ºr Leute mit wenig Geld", correct: false, feedback: "Das ist ein Vorurteil. Immer mehr Menschen kaufen aus √úberzeugung und Stil-Gr√ºnden Second Hand." }
                ]
            },
            {
                question: "Wieviel Food Waste produziert die Schweiz pro Person und Jahr?",
                answers: [
                    { text: "Etwa 30 kg", correct: false, feedback: "Leider viel mehr! Die Schweiz ist beim Food Waste leider Spitzenreiter." },
                    { text: "Etwa 90 kg", correct: true, feedback: "Korrekt! Jede Person wirft durchschnittlich 90 kg geniessbare Lebensmittel weg. Das entspricht etwa 600 CHF pro Jahr." },
                    { text: "Etwa 150 kg", correct: false, feedback: "Nicht ganz, aber du liegst n√§her als die Optimisten. Es sind etwa 90 kg pro Person und Jahr." },
                    { text: "Etwa 10 kg", correct: false, feedback: "So wenig w√§re sch√∂n! Tats√§chlich sind es etwa 90 kg pro Person und Jahr - ein riesiges Problem." }
                ]
            },
            {
                question: "Ein Wochenend-Trip - welche Option hat den kleinsten CO‚ÇÇ-Fussabdruck?",
                answers: [
                    { text: "Mit dem Elektroauto nach M√ºnchen (300 km)", correct: false, feedback: "E-Auto ist gut, aber der Zug ist noch besser - und Sie k√∂nnen entspannen statt fahren!" },
                    { text: "Mit dem Zug nach Paris (500 km)", correct: true, feedback: "Richtig! Der Zug hat pro Person etwa 10x weniger CO‚ÇÇ als ein Flug und 3x weniger als Auto (auch E-Auto)." },
                    { text: "Billigflug nach Barcelona (1000 km)", correct: false, feedback: "Ein Kurzstreckenflug verursacht pro km am meisten CO‚ÇÇ - etwa 230 g pro km. Der Zug nur etwa 20 g." },
                    { text: "Carsharing mit 4 Personen nach Mailand (280 km)", correct: false, feedback: "Carsharing ist gut, aber Zug schl√§gt auch voll besetztes Auto punkto CO‚ÇÇ." }
                ]
            },
            {
                question: "Welche Aussage zum Streaming (Netflix, YouTube etc.) stimmt?",
                answers: [
                    { text: "Streaming verbraucht kaum Energie, da alles digital ist", correct: false, feedback: "Falsch! Streaming verursacht durch Rechenzentren und √úbertragung bedeutenden Stromverbrauch." },
                    { text: "1 Stunde HD-Streaming ‚âà 100-150g CO‚ÇÇ, so viel wie 1 km Autofahrt", correct: true, feedback: "Korrekt! Streaming ist nicht 'gratis' f√ºr die Umwelt. Besonders 4K verbraucht viel Energie in Rechenzentren." },
                    { text: "Musik-Streaming ist schlimmer als Video-Streaming", correct: false, feedback: "Nein, Video braucht viel mehr Daten und damit mehr Energie. Besonders 4K ist energieintensiv." },
                    { text: "Downloads sind schlechter als Streaming", correct: false, feedback: "Das Gegenteil stimmt - etwas einmal runterladen und mehrmals anschauen ist effizienter als mehrfaches Streaming." }
                ]
            },
            {
                question: "Was ist der gr√∂sste Hebel f√ºr nachhaltiges Wohnen?",
                answers: [
                    { text: "LED-Lampen statt Gl√ºhbirnen verwenden", correct: false, feedback: "LED hilft, aber Heizung und Wohnfl√§che haben viel gr√∂sseren Impact." },
                    { text: "Kleinere Wohnfl√§che w√§hlen (z.B. 50m¬≤ statt 80m¬≤)", correct: true, feedback: "Absolut richtig! Wohnfl√§che beeinflusst Heizung, Material, Infrastruktur. 30m¬≤ weniger spart etwa 1 Tonne CO‚ÇÇ/Jahr." },
                    { text: "Nur noch kalt duschen", correct: false, feedback: "Das ist extrem und bringt weniger als du denkst. Wohnfl√§che und Heiztemperatur sind wichtiger." },
                    { text: "Alle Ger√§te durch neue energieeffiziente ersetzen", correct: false, feedback: "Neue Ger√§te herzustellen verbraucht auch Ressourcen. Alte l√§nger nutzen + kleinere Wohnung ist besser." }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let gameScore = 0;
        let gameCorrectCount = 0;
        let gameAnswered = false;

        function initGame() {
            document.getElementById('totalQuestions').textContent = questions.length;
            renderGameQuestion();
        }

        function renderGameQuestion() {
            gameAnswered = false;
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            const questionData = questions[currentQuestionIndex];
            
            const questionDiv = document.createElement('div');
            questionDiv.className = 'game-question active';
            
            questionDiv.innerHTML = `
                <div class="question-number">Frage ${currentQuestionIndex + 1} von ${questions.length}</div>
                <div class="question-text">${questionData.question}</div>
                <div class="answer-options" id="answerOptions"></div>
                <div class="game-feedback" id="gameFeedback"></div>
                <button class="next-btn" id="nextBtn" onclick="nextGameQuestion()">
                    ${currentQuestionIndex < questions.length - 1 ? 'N√§chste Frage ‚Üí' : 'Ergebnis anzeigen üéØ'}
                </button>
            `;
            
            container.appendChild(questionDiv);
            
            const optionsContainer = document.getElementById('answerOptions');
            questionData.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer.text;
                btn.onclick = () => selectGameAnswer(index);
                optionsContainer.appendChild(btn);
            });
            
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        }

        function selectGameAnswer(selectedIndex) {
            if (gameAnswered) return;
            gameAnswered = true;

            const questionData = questions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('gameFeedback');
            const nextBtn = document.getElementById('nextBtn');

            buttons.forEach((btn, index) => {
                btn.style.pointerEvents = 'none';
                if (questionData.answers[index].correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex) {
                    btn.classList.add('incorrect');
                }
            });

            const selectedAnswer = questionData.answers[selectedIndex];
            
            if (selectedAnswer.correct) {
                gameScore += 10;
                gameCorrectCount++;
                feedback.className = 'game-feedback correct show';
                feedback.innerHTML = `<strong>‚úì Richtig!</strong> ${selectedAnswer.feedback}`;
            } else {
                feedback.className = 'game-feedback incorrect show';
                feedback.innerHTML = `<strong>‚úó Leider falsch.</strong> ${selectedAnswer.feedback}`;
            }

            document.getElementById('scoreDisplay').textContent = gameScore;
            document.getElementById('correctAnswers').textContent = gameCorrectCount;
            nextBtn.classList.add('show');
        }

        function nextGameQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                renderGameQuestion();
            } else {
                showGameResult();
            }
        }

        function showGameResult() {
            document.getElementById('questionsContainer').style.display = 'none';
            const resultDiv = document.getElementById('gameResult');
            resultDiv.classList.add('show');

            document.getElementById('finalScore').textContent = `${gameCorrectCount}/${questions.length}`;

            const percentage = (gameCorrectCount / questions.length) * 100;
            let emoji, message;

            if (percentage >= 90) {
                emoji = 'üåü';
                message = 'Exzellent! Sie sind ein Nachhaltigkeits-Profi! Machen Sie weiter so!';
            } else if (percentage >= 70) {
                emoji = 'üòä';
                message = 'Super! Sie wissen schon viel √ºber nachhaltiges Leben!';
            } else if (percentage >= 50) {
                emoji = 'üëç';
                message = 'Gut gemacht! Sie sind auf dem richtigen Weg!';
            } else {
                emoji = 'üí™';
                message = 'Das war ein Anfang! Schauen Sie sich die Tipps an und versuchen Sie es nochmal!';
            }

            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultMessage').textContent = message;
        }

        function restartGame() {
            currentQuestionIndex = 0;
            gameScore = 0;
            gameCorrectCount = 0;
            gameAnswered = false;

            document.getElementById('scoreDisplay').textContent = '0';
            document.getElementById('correctAnswers').textContent = '0';
            document.getElementById('questionsContainer').style.display = 'block';
            document.getElementById('gameResult').classList.remove('show');

            initGame();
        }

        // Initialize game when container is opened
        let gameInitialized = false;
        const originalToggleGame = toggleGame;
        toggleGame = function() {
            originalToggleGame();
            if (!gameInitialized && document.getElementById('gameContainer').style.display === 'block') {
                initGame();
                gameInitialized = true;
            }
        };
    </script>
</body>
</html>
